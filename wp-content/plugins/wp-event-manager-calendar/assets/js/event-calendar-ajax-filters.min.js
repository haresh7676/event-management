var EventCalendarAjaxFilter=function(){return{init:function(){Common.logInfo("EventCalendarAjaxFilter.init..."),jQuery("#search_datetimes").length>0&&jQuery(document).delegate("#search_datetimes","change",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery("#search_location").length>0&&jQuery(document).delegate("#search_location","change",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery("#search_keywords").length>0&&jQuery(document).delegate("#search_keywords","change",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery("#search_categories").length>0&&jQuery(document).delegate("#search_categories","change",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery("#search_event_types").length>0&&jQuery(document).delegate("#search_event_types","change",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery("#search_ticket_prices").length>0&&jQuery(document).delegate("#search_ticket_prices","change",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery(document).delegate("#calendar-layout-icon","click",EventCalendarAjaxFilter.actions.calendarLayoutIconClick),jQuery(document).delegate("#line-layout-icon","click",EventCalendarAjaxFilter.actions.calendarLayoutHide),jQuery(document).delegate("#box-layout-icon","click",EventCalendarAjaxFilter.actions.calendarLayoutHide),jQuery("#event_filters").on("change",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery(".event_filters").on("click",".reset",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery(".filter_by_tag_cloud").on("click",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery(window).on("load",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery("body").on("click","#event_calendar_filters_button",EventCalendarAjaxFilter.actions.getFilteredCalendarData),jQuery("body").on("click","#calendar_navigation_previous",EventCalendarAjaxFilter.actions.getFilteredCalendarData),jQuery("body").on("click","#calendar_navigation_next",EventCalendarAjaxFilter.actions.getFilteredCalendarData),jQuery("body").on("click","#event_calendar_widget_filters_button",EventCalendarAjaxFilter.actions.getFilteredWidgetCalendarData),jQuery("body").on("click","#calendar_widget_navigation_previous",EventCalendarAjaxFilter.actions.getFilteredWidgetCalendarData),jQuery("body").on("click","#calendar_widget_navigation_next",EventCalendarAjaxFilter.actions.getFilteredWidgetCalendarData),EventCalendarAjaxFilter.actions.eventDetailsPopup(),EventCalendarAjaxFilter.actions.showWidgetEventsDetails(),jQuery("#upcoming").length>0&&jQuery("#past").length>0?(jQuery("#upcoming  #calendar-layout-icon").hide(),jQuery("#current  #calendar-layout-icon").hide(),jQuery("#past  #calendar-layout-icon").hide()):jQuery("#calendar-layout-icon").show(),jQuery(document).delegate("#upcoming-past-tabs a","click",EventCalendarAjaxFilter.actions.calendarLayoutIconHide)},actions:{windowLoad:function(e){console.log("EventCalendarAjaxFilter.actions.windowLoad..."),Common.logInfo("EventCalendarAjaxFilter.actions.windowLoad..."),EventCalendarAjaxFilter.actions.filtersValueChanged(e)},filtersValueChanged:function(e){if(Common.logInfo("EventCalendarAjaxFilter.actions.filtersValueChanged..."),"calendar-layout"==localStorage.getItem("layout")){jQuery("#search_datetimes").val();setTimeout(function(){EventCalendarAjaxFilter.actions.calendarLayoutIconClick(e)},1e3)}},calendarLayoutIconHide:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.calendarLayoutIconHide..."),jQuery("#upcoming").length>0&&jQuery("#past").length>0?(jQuery("#upcoming  #calendar-layout-icon").hide(),jQuery("#past  #calendar-layout-icon").hide()):jQuery("#calendar-layout-icon").show(),e.preventDefault()},calendarLayoutHide:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.calendarLayoutHide..."),jQuery("#calendar-layout-icon").addClass("lightgray-layout-icon"),jQuery("#calendar-layout-view-container").remove(),jQuery(".load_previous").length>0?jQuery(".load_previous").show():jQuery("#load_more_events").length>0&&jQuery("#load_more_events").show(),jQuery(".event-manager-pagination").show(),e.preventDefault()},calendarLayoutIconClick:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.calendarLayoutIconClick..."),jQuery(".box-layout").hide(),jQuery(".line-layout").hide(),jQuery("#load_more_events").hide(),jQuery(".event-manager-pagination").hide(),jQuery("#line-layout-icon").addClass("lightgray-layout-icon"),jQuery("#box-layout-icon").addClass("lightgray-layout-icon"),jQuery("#calendar-layout-icon").removeClass("lightgray-layout-icon"),jQuery("#event-listing-view").removeClass("event-listings-table-bordered"),localStorage.setItem("layout","calendar-layout"),EventCalendarAjaxFilter.actions.getCalendarLayoutData(),e.preventDefault()},eventDetailsPopup:function(){jQuery(".calendar-event-details-link").mouseover(function(e){var a=jQuery("#"+e.target.id).children("div").attr("id");jQuery("#"+a).fadeIn("fast")}).mouseout(function(e){var a=jQuery("#"+e.target.id).children("div").attr("id");jQuery("#"+a).fadeOut("fast")}),jQuery(".calendar-widget-event-details-link").mouseover(function(e){var a=jQuery("#"+e.target.id).children("div").attr("id");jQuery("#"+a).fadeIn("fast")}).mouseout(function(e){var a=jQuery("#"+e.target.id).children("div").attr("id");jQuery("#"+a).fadeOut("fast")})},showWidgetEventsDetails:function(){jQuery(".current_date").on("click",EventCalendarAjaxFilter.actions.ajaxCalanderwidgetCurrentEvent)},getFilteredCalendarData:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.getFilteredCalendarData...");var a=jQuery("#calendar_month").val(),n=jQuery("#calendar_year").val(),t=jQuery("#calendar_navigation_month").val(),r=jQuery("#events_calendar_nonce").val(),l={calendar_month:a,calendar_year:n,calendar_navigation_month:t,calendar_navigation:e.target.id,events_calendar_nonce:r};jQuery.ajax({type:"POST",url:event_manager_calendar_event_calendar_ajax_filters.ajax_url.toString().replace("%%endpoint%%","events_calendar"),data:l,beforeSend:function(){jQuery("#calendar-loader-container").addClass("calendar-loading"),jQuery("#line-layout-icon").prop("disabled",!0),jQuery("#box-layout-icon").prop("disabled",!0)},success:function(e){var a=jQuery("#calendar-container").parent();jQuery("#calendar-container").remove(),jQuery(a).html(e),jQuery("#calendar-loader-container").removeClass("calendar-loading")},error:function(e,a,n){Common.logInfo("Error:"+a)},complete:function(e,a){EventCalendarAjaxFilter.actions.eventDetailsPopup()}}),jQuery("#line-layout-icon").prop("disabled",!1),jQuery("#box-layout-icon").prop("disabled",!1),e.preventDefault()},getFilteredWidgetCalendarData:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.getFilteredWidgetCalendarData...");var a=jQuery("#calendar_month").val(),n=jQuery("#calendar_year").val(),t=jQuery("#calendar_navigation_month").val(),r=jQuery("#events_calendar_widget_nonce").val(),l={calendar_month:a,calendar_year:n,calendar_navigation_month:t,calendar_navigation:e.target.id,events_calendar_widget_nonce:r};jQuery.ajax({type:"POST",url:event_manager_calendar_event_calendar_ajax_filters.ajax_url.toString().replace("%%endpoint%%","events_calendar_widget"),data:l,beforeSend:function(){jQuery("#calendar-loader-container").addClass("calendar-loading")},success:function(e){var a=jQuery("#calendar-widget-container").parent(),n=jQuery("#calendar-widget-container").index();jQuery("#calendar-widget-container").remove(),jQuery(a).insertAt(n,e),jQuery("#calendar-loader-container").removeClass("calendar-loading")},error:function(e,a,n){Common.logInfo("Error:"+a)},complete:function(e,a){EventCalendarAjaxFilter.actions.eventDetailsPopup(),EventCalendarAjaxFilter.actions.showWidgetEventsDetails()}}),e.preventDefault()},getCalendarLayoutData:function(){Common.logInfo("EventCalendarAjaxFilter.actions.getCalendarLayoutData...");var e=jQuery("#search_keywords").val(),a=jQuery("#search_location").val(),n=jQuery("#search_datetimes").val(),t=jQuery("#search_categories").val(),r=jQuery("#search_event_types").val(),l=jQuery("#search_ticket_prices").val();if(jQuery("input[name='event_tag[]']").length)var i=jQuery("input[name='event_tag[]']").map(function(){return jQuery(this).val()}).get();else i="";var o={search_keywords:e,search_location:a,search_datetimes:n,search_categories:t,search_event_types:r,search_ticket_prices:l,search_tags:i};jQuery.ajax({type:"POST",url:event_manager_calendar_event_calendar_ajax_filters.ajax_url.toString().replace("%%endpoint%%","events_calendar_layout"),data:o,beforeSend:function(){jQuery("#box-layout-icon").prop("disabled",!0),jQuery("#line-layout-icon").prop("disabled",!0)},success:function(e){jQuery(".event-manager-pagination").hide(),jQuery("#event-listing-view").after().append("<div id='calendar-layout-view-container'>"),jQuery("#calendar-layout-view-container").html(e),jQuery("#box-layout-icon").prop("disabled",!1),jQuery("#line-layout-icon").prop("disabled",!1)},error:function(e,a,n){Common.logInfo("Error: "+a)},complete:function(e,a){EventCalendarAjaxFilter.actions.eventDetailsPopup()}})},ajaxCalanderwidgetCurrentEvent:function(e){if(jQuery(this).children(".current_date_event").val().length>0)var a=jQuery(this).children(".current_date_event").val();else a="";jQuery.ajax({type:"POST",url:event_manager_calendar_event_calendar_ajax_filters.ajax_url,data:{action:"widget_current_event_detail",event_id:a},beforeSend:function(e,a){Common.logInfo("Before send called...")},success:function(e){jQuery("#current_event_container").html(e)},error:function(e,a,n){Common.logInfo("Error in...")},complete:function(e,a){}}),e.preventDefault()}}}};EventCalendarAjaxFilter=EventCalendarAjaxFilter(),jQuery(document).ready(function(e){EventCalendarAjaxFilter.init()}),jQuery.fn.insertAt=function(e,a){var n=this.children().size();return e<0&&(e=Math.max(0,n+1+e)),this.append(a),e<n&&this.children().eq(e).before(this.children().last()),this};